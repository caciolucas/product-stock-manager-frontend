(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6573"],{"71ad":function(e,a,t){"use strict";t.r(a);var i=t("7a23");const o=Object(i["k"])("h2",{class:"p-text-uppercase p-text-left"},"Empresas Fornecedoras",-1),n={style:{}},s=Object(i["k"])("h3",null,"Nova Empresa",-1),l={class:"p-fluid p-grid p-mt-2"},d={class:"p-field p-col-12"},c={class:"p-float-label"},p=Object(i["k"])("label",null,"Nome da empresa",-1);function m(e,a,t,m,b,r){const u=Object(i["A"])("Button"),h=Object(i["A"])("Toolbar"),y=Object(i["A"])("Column"),O=Object(i["A"])("DataTable"),j=Object(i["A"])("InputText"),w=Object(i["A"])("Dialog"),k=Object(i["A"])("Toast");return Object(i["u"])(),Object(i["g"])(i["a"],null,[o,Object(i["k"])(h,{class:"p-p-2"},{left:Object(i["K"])(()=>[Object(i["k"])(u,{class:"p-ml-2 p-button-success",label:"Empresa",icon:"fas fa-plus",onClick:r.openNewCompanyDialog},null,8,["onClick"])]),_:1}),Object(i["k"])(O,{value:b.companies,class:"p-datatable-sm",paginator:!0,rows:13,expandedRows:b.expandedCompanies,"onUpdate:expandedRows":a[1]||(a[1]=e=>b.expandedCompanies=e),dataKey:"id",style:{width:"100%"}},{expansion:Object(i["K"])(e=>[Object(i["k"])("div",n,[Object(i["k"])("h4",null,Object(i["E"])(e.data.products.total_itens)+" produtos fornecidos por "+Object(i["E"])(e.data.name),1),Object(i["k"])(O,{value:e.data.products.itens,class:"p-datatable-sm"},{default:Object(i["K"])(()=>[Object(i["k"])(y,{field:"id",header:"#",headerStyle:"width: 3rem"}),Object(i["k"])(y,{field:"name",header:"Nome do produto"}),Object(i["k"])(y,{header:"Preço",field:"price"},{body:Object(i["K"])(e=>[Object(i["j"])(" R$ "+Object(i["E"])(e.data.price.toFixed(2)),1)]),_:1}),Object(i["k"])(y,{field:"quantity",header:"Quantidade"})]),_:2},1032,["value"])])]),default:Object(i["K"])(()=>[Object(i["k"])(y,{expander:!0,headerStyle:"width: 3rem"}),Object(i["k"])(y,{header:"#",field:"id",headerStyle:"width: 3rem"}),Object(i["k"])(y,{field:"name",header:"Nome"}),Object(i["k"])(y,{field:"products.total_itens",header:"Tota de Itens"}),Object(i["k"])(y,{field:"products.total_quantity",header:"Total de Estoque"})]),_:1},8,["value","expandedRows"]),Object(i["k"])(w,{visible:b.newCompanyDialogVisibility,"onUpdate:visible":a[3]||(a[3]=e=>b.newCompanyDialogVisibility=e),modal:!0,style:{width:"40vw"},onHide:r.closeNewCompanyDialog},{header:Object(i["K"])(()=>[s]),footer:Object(i["K"])(()=>[Object(i["k"])(u,{label:"Não",icon:"pi pi-times",class:"p-button-text",onClick:r.closeNewCompanyDialog},null,8,["onClick"]),Object(i["k"])(u,{label:"Sim",icon:"pi pi-check",autofocus:"",onClick:r.validateNewCompany},null,8,["onClick"])]),default:Object(i["K"])(()=>[Object(i["k"])("div",l,[Object(i["k"])("div",d,[Object(i["k"])("span",c,[Object(i["k"])(j,{type:"text",modelValue:b.newCompanyData.name,"onUpdate:modelValue":a[2]||(a[2]=e=>b.newCompanyData.name=e),maxlength:"50",class:{"p-invalid":b.newCompanySubmitted&&r.isNullOrWhiteSpace(b.newCompanyData.name)}},null,8,["modelValue","class"]),p])])])]),_:1},8,["visible","onHide"]),Object(i["k"])(k)],64)}var b=t("bc3a"),r=t.n(b);r.a.defaults.baseURL="https://product-stock-manager.herokuapp.com/";var u={name:"Empresas.vue",data(){return{companies:[],expandedCompanies:[],newCompanySubmitted:!1,newCompanyDialogVisibility:!1,newCompanyData:{}}},mounted(){r.a.get("/api/company/").then(e=>{this.companies=e.data})},methods:{isNullOrWhiteSpace(e){return!e||0===e.length||/^\s*$/.test(e)},openNewCompanyDialog(){this.newCompanyDialogVisibility=!0},closeNewCompanyDialog(){this.newCompanyDialogVisibility=!1,this.newCompanyData={},this.newCompanySubmitted=!1},validateNewCompany(){this.newCompanySubmitted=!0,this.isNullOrWhiteSpace(this.newCompanyData.name)?this.$toast.add({severity:"warn",summary:"Atenção!",detail:"Preencha todos os campos",life:3e3}):this.saveCompany()},saveCompany(){r.a.post("/api/company/",this.newCompanyData).then(e=>{this.$toast.add({severity:"success",summary:"Sucesso!",detail:`Empresa "${e.data.name}" cadastrada`,life:3e3}),this.companies.unshift(e.data),this.newCompanyData={},this.newCompanyDialogVisibility=!1,this.newCompanySubmitted=!1})}}};u.render=m;a["default"]=u}}]);
//# sourceMappingURL=chunk-2d0d6573.f49eea8e.js.map
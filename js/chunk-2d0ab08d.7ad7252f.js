(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab08d"],{"140d":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const i=Object(o["k"])("h2",{class:"p-text-uppercase p-text-left"},"Categorias de Produtos",-1),l={class:"p-inputgroup"},c=Object(o["k"])("span",{class:"p-inputgroup-addon"},[Object(o["k"])("i",{class:"fas fa-layer-group"})],-1),s={class:"p-grid p-jc-end"},n={class:"p-text-uppercase p-text-bold p-my-2"},d={key:0},r=Object(o["k"])("i",{class:"fas fa-building"},null,-1),u={key:1},p=Object(o["k"])("i",{class:"fas fa-th"},null,-1),b=Object(o["k"])("h3",null,"Nova Categoria",-1),g={class:"p-fluid p-grid p-mt-2"},h={class:"p-field p-col-12"},O={class:"p-float-label"},y=Object(o["k"])("label",null,"Nome da categoria",-1),m=Object(o["k"])("h3",null,"Novo Produto",-1),j={class:"p-fluid p-grid p-mt-2"},w={class:"p-field p-col-12"},k={class:"p-float-label"},P=Object(o["k"])("label",null,"Nome do produto",-1),D={class:"p-fluid p-grid p-mt-2"},v={class:"p-field p-col-8"},f={class:"p-float-label"},C=Object(o["k"])("label",null,"Preço",-1),S={class:"p-field p-col-4"},V={class:"p-float-label"},N=Object(o["k"])("label",null,"Quantidade",-1),B={class:"p-fluid p-grid p-mt-2"},_={class:"p-field p-col-6"},A={class:"p-float-label"},$=Object(o["k"])("label",null,"Fornecedores",-1),x={class:"p-field p-col-6"},K={class:"p-float-label"},q=Object(o["k"])("label",null,"Categoria",-1);function U(e,t,a,U,W,E){const F=Object(o["A"])("Button"),L=Object(o["A"])("Dropdown"),T=Object(o["A"])("Toolbar"),R=Object(o["A"])("Column"),G=Object(o["A"])("Tag"),H=Object(o["A"])("DataTable"),I=Object(o["A"])("InputText"),z=Object(o["A"])("Dialog"),J=Object(o["A"])("InputNumber"),M=Object(o["A"])("Toast"),Q=Object(o["A"])("ConfirmDialog");return Object(o["u"])(),Object(o["g"])(o["a"],null,[i,Object(o["k"])(T,{class:"p-p-2"},{left:Object(o["K"])(()=>[Object(o["k"])(F,{class:"p-m-0 p-button-success",label:"Categoria",icon:"fas fa-plus",onClick:E.openNewCategoryDialog},null,8,["onClick"]),Object(o["k"])(F,{class:"p-ml-2 p-button-success",label:"Produto",icon:"fas fa-plus",onClick:E.openNewProductDialog},null,8,["onClick"])]),right:Object(o["K"])(()=>[Object(o["k"])("div",l,[c,Object(o["k"])(L,{modelValue:W.groupByOption,"onUpdate:modelValue":t[1]||(t[1]=e=>W.groupByOption=e),options:W.groupByOptionList,optionLabel:"label",optionValue:"value",placeholder:"Agrupar por",style:{width:"12rem"},showClear:!0,onChange:t[2]||(t[2]=e=>E.changeGrouByOption(e))},null,8,["modelValue","options"])])]),_:1}),Object(o["k"])(H,{value:W.products,class:"p-datatable-sm",rowGroupMode:W.groupByOptionSelection?"subheader":"",groupRowsBy:"supplier"===W.groupByOptionSelection?"supplier.id":"category"===W.groupByOptionSelection?"category.id":"id",removableSort:"",sortField:W.dynamicSortField,sortOrder:1,paginator:!0,rows:13},{groupheader:Object(o["K"])(e=>[Object(o["k"])("h3",n,["supplier"==W.groupByOptionSelection?(Object(o["u"])(),Object(o["g"])("span",d,[r,Object(o["j"])(" "+Object(o["E"])(e.data.supplier.name),1)])):Object(o["h"])("",!0),"category"==W.groupByOptionSelection?(Object(o["u"])(),Object(o["g"])("span",u,[p,Object(o["j"])(" "+Object(o["E"])(e.data.category.name),1)])):Object(o["h"])("",!0)])]),default:Object(o["K"])(()=>[Object(o["k"])(R,{header:"#",field:"id",headerStyle:"width: 3rem"}),Object(o["k"])(R,{header:"Nome",field:"name"}),Object(o["k"])(R,{header:"Quantidade",field:"quantity"},{body:Object(o["K"])(e=>[Object(o["k"])(G,{value:e.data.quantity,style:{width:"4rem"},severity:e.data.quantity>=15?"success":e.data.quantity>=10?"warning":"danger"},null,8,["value","severity"])]),_:1}),Object(o["k"])(R,{header:"Preço",field:"price"},{body:Object(o["K"])(e=>[Object(o["j"])(" R$ "+Object(o["E"])(e.data.price.toFixed(2)),1)]),_:1}),"supplier"!=W.groupByOptionSelection?(Object(o["u"])(),Object(o["g"])(R,{key:0,field:"supplier.name",header:"Fornecedor"})):Object(o["h"])("",!0),"category"!=W.groupByOptionSelection?(Object(o["u"])(),Object(o["g"])(R,{key:1,field:"category.name",header:"Categoria"})):Object(o["h"])("",!0),Object(o["k"])(R,null,{body:Object(o["K"])(e=>[Object(o["k"])("div",s,[Object(o["k"])(F,{class:"\n              p-button-icon-only\n              p-button-rounded\n              p-button-outlined\n              p-button-help\n              p-mx-1\n            ",icon:"fas fa-edit",onClick:t=>E.editProduct(e.data)},null,8,["onClick"]),Object(o["k"])(F,{class:"\n              p-button-icon-only\n              p-button-rounded\n              p-button-outlined\n              p-button-danger\n              p-mx-4\n            ",icon:"fas fa-trash",onClick:t=>E.openDeleteProductDialog(e.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","rowGroupMode","groupRowsBy","sortField"]),Object(o["k"])(z,{visible:W.newCategoryDialogVisibility,"onUpdate:visible":t[4]||(t[4]=e=>W.newCategoryDialogVisibility=e),modal:!0,style:{width:"40vw"},onHide:E.closeNewCategoryDialog},{header:Object(o["K"])(()=>[b]),footer:Object(o["K"])(()=>[Object(o["k"])(F,{label:"Não",icon:"pi pi-times",class:"p-button-text",onClick:E.closeNewCategoryDialog},null,8,["onClick"]),Object(o["k"])(F,{label:"Sim",icon:"pi pi-check",autofocus:"",onClick:E.validateNewCategory},null,8,["onClick"])]),default:Object(o["K"])(()=>[Object(o["k"])("div",g,[Object(o["k"])("div",h,[Object(o["k"])("span",O,[Object(o["k"])(I,{type:"text",modelValue:W.newCategoryData.name,"onUpdate:modelValue":t[3]||(t[3]=e=>W.newCategoryData.name=e),maxlength:"50",class:{"p-invalid":W.newCategorySubmitted&&E.isNullOrWhiteSpace(W.newCategoryData.name)}},null,8,["modelValue","class"]),y])])])]),_:1},8,["visible","onHide"]),Object(o["k"])(z,{visible:W.newProductDialogVisibility,"onUpdate:visible":t[10]||(t[10]=e=>W.newProductDialogVisibility=e),modal:!0,style:{width:"40vw"},onHide:E.closeNewProductDialog},{header:Object(o["K"])(()=>[m]),footer:Object(o["K"])(()=>[Object(o["k"])(F,{label:"Não",icon:"pi pi-times",class:"p-button-text",onClick:E.closeNewProductDialog},null,8,["onClick"]),Object(o["k"])(F,{label:"Sim",icon:"pi pi-check",autofocus:"",onClick:E.validateNewProduct},null,8,["onClick"])]),default:Object(o["K"])(()=>[Object(o["k"])("div",j,[Object(o["k"])("div",w,[Object(o["k"])("span",k,[Object(o["k"])(I,{type:"text",modelValue:W.newProductData.name,"onUpdate:modelValue":t[5]||(t[5]=e=>W.newProductData.name=e),maxlength:"50",class:{"p-invalid":W.newProductSubmitted&&E.isNullOrWhiteSpace(W.newProductData.name)}},null,8,["modelValue","class"]),P])])]),Object(o["k"])("div",D,[Object(o["k"])("div",v,[Object(o["k"])("span",f,[Object(o["k"])(J,{mode:"currency",currency:"BRL",locale:"pt-BR",modelValue:W.newProductData.price,"onUpdate:modelValue":t[6]||(t[6]=e=>W.newProductData.price=e),class:{"p-invalid":W.newProductSubmitted&&E.isNullOrWhiteSpace(W.newProductData.price)}},null,8,["modelValue","class"]),C])]),Object(o["k"])("div",S,[Object(o["k"])("span",V,[Object(o["k"])(J,{modelValue:W.newProductData.quantity,"onUpdate:modelValue":t[7]||(t[7]=e=>W.newProductData.quantity=e),mode:"decimal",locale:"pt-BR",class:{"p-invalid":W.newProductSubmitted&&E.isNullOrWhiteSpace(W.newProductData.quantity)&&0!=W.newProductData.quantity}},null,8,["modelValue","class"]),N])])]),Object(o["k"])("div",B,[Object(o["k"])("div",_,[Object(o["k"])("span",A,[Object(o["k"])(L,{modelValue:W.newProductData.supplier_id,"onUpdate:modelValue":t[8]||(t[8]=e=>W.newProductData.supplier_id=e),options:W.suppliers,optionLabel:"name",optionValue:"id",class:{"p-invalid":W.newProductSubmitted&&E.isNullOrWhiteSpace(W.newProductData.supplier_id)}},null,8,["modelValue","options","class"]),$])]),Object(o["k"])("div",x,[Object(o["k"])("span",K,[Object(o["k"])(L,{modelValue:W.newProductData.category_id,"onUpdate:modelValue":t[9]||(t[9]=e=>W.newProductData.category_id=e),options:W.categories,optionLabel:"name",optionValue:"id",class:{"p-invalid":W.newProductSubmitted&&E.isNullOrWhiteSpace(W.newProductData.category_id)}},null,8,["modelValue","options","class"]),q])])])]),_:1},8,["visible","onHide"]),Object(o["k"])(M),Object(o["k"])(Q)],64)}var W=a("bc3a"),E=a.n(W);E.a.defaults.baseURL="https://product-stock-manager.herokuapp.com/";var F={data(){return{dynamicSortField:null,products:[],suppliers:[],categories:[],newProductSubmitted:!1,newProductDialogVisibility:!1,newProductData:{},newCategorySubmitted:!1,newCategoryDialogVisibility:!1,newCategoryData:{},groupByOption:null,groupByOptionSelection:null,groupByOptionList:[{value:"supplier",label:"Fornecedor"},{value:"category",label:"Categoria"}]}},mounted(){console.log("https://product-stock-manager.herokuapp.com/"),console.log(Object({VUE_APP_BACKEND_BASE:"https://product-stock-manager.herokuapp.com/",NODE_ENV:"production",BASE_URL:"/product-stock-manager-frontend/"}).VUE_APP_TITLE),this.getProducts(),E.a.get("/api/company/").then(e=>{this.suppliers=e.data}),E.a.get("/api/category/").then(e=>{this.categories=e.data})},methods:{getProducts(){this.products=[],E.a.get("/api/product/").then(e=>{this.products=e.data})},isNullOrWhiteSpace(e){return!e||0===e.length||/^\s*$/.test(e)},changeGrouByOption(e){this.dynamicSortField=e.value+".name",this.groupByOption=e.value,this.groupByOptionSelection=e.value},openNewProductDialog(){this.newProductDialogVisibility=!0},closeNewProductDialog(){this.newProductDialogVisibility=!1,this.newProductData={},this.newProductSubmitted=!1},openNewCategoryDialog(){this.newCategoryDialogVisibility=!0},closeNewCategoryDialog(){this.newCategoryDialogVisibility=!1,this.newCategoryData={},this.newCategorySubmitted=!1},openDeleteProductDialog(e){this.$confirm.require({message:`Deseja realmente apagar o produto ${e.name}?`,header:"Tem certeza?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteProduct(e),this.getProducts()},reject:()=>{}})},deleteProduct(e){E.a.delete(`/api/product/${e.id}/`).then(()=>{this.$toast.add({severity:"success",summary:"Sucesso!",detail:"Produto apagado com sucesso!"})}).catch(e=>{this.$toast.add({severity:"error",summary:`Erro! ${e.response.status} ${e.response.statusText}`,detail:e.message})})},saveProduct(){this.newProductData.id?E.a.patch(`/api/product/${this.newProductData.id}/`,this.newProductData).then(e=>{this.$toast.add({severity:"success",summary:"Sucesso!",detail:`Produto "${e.data.name}" atualizado`,life:3e3}),this.newProductData={},this.newProductDialogVisibility=!1,this.newProductSubmitted=!1,this.getProducts()}):E.a.post("/api/product/",this.newProductData).then(e=>{this.$toast.add({severity:"success",summary:"Sucesso!",detail:`Produto "${e.data.name}" cadastrado`,life:3e3}),this.newProductData={},this.newProductDialogVisibility=!1,this.newProductSubmitted=!1,this.getProducts()})},validateNewProduct(){this.newProductSubmitted=!0,this.isNullOrWhiteSpace(this.newProductData.name)||this.isNullOrWhiteSpace(this.newProductData.price)||this.isNullOrWhiteSpace(this.newProductData.quantity)&&0!=this.newProductData.quantity||this.isNullOrWhiteSpace(this.newProductData.supplier_id)||this.isNullOrWhiteSpace(this.newProductData.category_id)?this.$toast.add({severity:"warn",summary:"Atenção!",detail:"Preencha todos os campos",life:3e3}):this.saveProduct()},editProduct(e){this.openNewProductDialog(),this.newProductData.id=e.id,this.newProductData.name=e.name,this.newProductData.price=e.price,this.newProductData.quantity=e.quantity,this.newProductData.supplier_id=e.supplier.id,this.newProductData.category_id=e.category.id},saveCategory(){E.a.post("/api/category/",this.newCategoryData).then(e=>{this.$toast.add({severity:"success",summary:"Sucesso!",detail:`Categoria "${e.data.name}" cadastrada`,life:3e3}),this.categories.unshift(e.data),this.newCategoryData={},this.newCategoryDialogVisibility=!1,this.newCategorySubmitted=!1})},validateNewCategory(){this.newCategorySubmitted=!0,this.isNullOrWhiteSpace(this.newCategoryData.name)?this.$toast.add({severity:"warn",summary:"Atenção!",detail:"Preencha todos os campos",life:3e3}):this.saveCategory()}}};F.render=U;t["default"]=F}}]);
//# sourceMappingURL=chunk-2d0ab08d.7ad7252f.js.map
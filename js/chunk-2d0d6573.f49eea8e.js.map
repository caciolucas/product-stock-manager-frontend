{"version":3,"sources":["webpack:///./src/views/Empresas.vue","webpack:///./src/views/Empresas.vue?0f5a"],"names":["class","style","left","label","icon","openNewCompanyDialog","value","companies","paginator","rows","expandedRows","expandedCompanies","dataKey","expansion","company","data","products","total_itens","name","itens","field","header","headerStyle","body","product","price","toFixed","expander","visible","newCompanyDialogVisibility","modal","closeNewCompanyDialog","footer","autofocus","validateNewCompany","type","newCompanyData","maxlength","a","defaults","baseURL","newCompanySubmitted","get","then","response","this","methods","str","length","test","isNullOrWhiteSpace","$toast","add","severity","summary","detail","life","saveCompany","post","unshift","render"],"mappings":"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","file":"js/chunk-2d0d6573.f49eea8e.js","sourcesContent":["<template>\n  <h2 class=\"p-text-uppercase p-text-left\">Empresas Fornecedoras</h2>\n  <Toolbar class=\"p-p-2\">\n    <template #left>\n      <Button\n        class=\"p-ml-2 p-button-success\"\n        label=\"Empresa\"\n        icon=\"fas fa-plus\"\n        @click=\"openNewCompanyDialog\"\n      ></Button>\n    </template>\n  </Toolbar>\n  <DataTable\n    :value=\"companies\"\n    class=\"p-datatable-sm\"\n    :paginator=\"true\"\n    :rows=\"13\"\n    v-model:expandedRows=\"expandedCompanies\"\n    dataKey=\"id\"\n    style=\"width: 100%\"\n  >\n    <Column :expander=\"true\" headerStyle=\"width: 3rem\" />\n    <Column header=\"#\" field=\"id\" headerStyle=\"width: 3rem\" />\n    <Column field=\"name\" header=\"Nome\" />\n    <Column field=\"products.total_itens\" header=\"Tota de Itens\" />\n    <Column field=\"products.total_quantity\" header=\"Total de Estoque\" />\n    <template #expansion=\"company\">\n      <div style=\"\">\n        <h4>\n          {{ company.data.products.total_itens }} produtos fornecidos por\n          {{ company.data.name }}\n        </h4>\n        <DataTable :value=\"company.data.products.itens\" class=\"p-datatable-sm\">\n          <Column field=\"id\" header=\"#\" headerStyle=\"width: 3rem\"></Column>\n          <Column field=\"name\" header=\"Nome do produto\"></Column>\n          <Column header=\"Preço\" field=\"price\">\n            <template #body=\"product\">\n              R$ {{ product.data.price.toFixed(2) }}\n            </template>\n          </Column>\n          <Column field=\"quantity\" header=\"Quantidade\"></Column>\n        </DataTable>\n      </div>\n    </template>\n  </DataTable>\n  <Dialog\n    v-model:visible=\"newCompanyDialogVisibility\"\n    :modal=\"true\"\n    style=\"width: 40vw\"\n    @hide=\"closeNewCompanyDialog\"\n  >\n    <template #header>\n      <h3>Nova Empresa</h3>\n    </template>\n\n    <div class=\"p-fluid p-grid p-mt-2\">\n      <div class=\"p-field p-col-12\">\n        <span class=\"p-float-label\">\n          <InputText\n            type=\"text\"\n            v-model=\"newCompanyData.name\"\n            maxlength=\"50\"\n            :class=\"{\n              'p-invalid':\n                newCompanySubmitted && isNullOrWhiteSpace(newCompanyData.name),\n            }\"\n          />\n          <label>Nome da empresa</label>\n        </span>\n      </div>\n    </div>\n\n    <template #footer>\n      <Button\n        label=\"Não\"\n        icon=\"pi pi-times\"\n        class=\"p-button-text\"\n        @click=\"closeNewCompanyDialog\"\n      />\n      <Button\n        label=\"Sim\"\n        icon=\"pi pi-check\"\n        autofocus\n        @click=\"validateNewCompany\"\n      />\n    </template>\n  </Dialog>\n  <Toast />\n</template>\n\n<script>\nimport axios from \"axios\";\naxios.defaults.baseURL = process.env.VUE_APP_BACKEND_BASE;\nexport default {\n  name: \"Empresas.vue\",\n  data() {\n    return {\n      companies: [],\n      expandedCompanies: [],\n\n      newCompanySubmitted: false,\n      newCompanyDialogVisibility: false,\n      newCompanyData: {},\n    };\n  },\n  mounted() {\n    axios.get(\"/api/company/\").then((response) => {\n      this.companies = response.data;\n    });\n  },\n  methods: {\n    // https://gist.github.com/EdCharbeneau/9552248\n    isNullOrWhiteSpace(str) {\n      return !str || str.length === 0 || /^\\s*$/.test(str);\n    },\n    openNewCompanyDialog() {\n      this.newCompanyDialogVisibility = true;\n    },\n    closeNewCompanyDialog() {\n      this.newCompanyDialogVisibility = false;\n      this.newCompanyData = {};\n      this.newCompanySubmitted = false;\n    },\n    validateNewCompany() {\n      this.newCompanySubmitted = true;\n      if (this.isNullOrWhiteSpace(this.newCompanyData.name)) {\n        this.$toast.add({\n          severity: \"warn\",\n          summary: \"Atenção!\",\n          detail: \"Preencha todos os campos\",\n          life: 3000,\n        });\n      } else {\n        this.saveCompany();\n      }\n    },\n    saveCompany() {\n      axios.post(\"/api/company/\", this.newCompanyData).then((response) => {\n        this.$toast.add({\n          severity: \"success\",\n          summary: \"Sucesso!\",\n          detail: `Empresa \"${response.data.name}\" cadastrada`,\n          life: 3000,\n        });\n        this.companies.unshift(response.data);\n        this.newCompanyData = {};\n        this.newCompanyDialogVisibility = false;\n        this.newCompanySubmitted = false;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n","import { render } from \"./Empresas.vue?vue&type=template&id=3f5ecbcc\"\nimport script from \"./Empresas.vue?vue&type=script&lang=js\"\nexport * from \"./Empresas.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
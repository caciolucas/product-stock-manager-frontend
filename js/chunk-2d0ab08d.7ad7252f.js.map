{"version":3,"sources":["webpack:///./src/views/Produtos.vue","webpack:///./src/views/Produtos.vue?5979"],"names":["class","left","label","icon","openNewCategoryDialog","openNewProductDialog","right","groupByOption","options","groupByOptionList","optionLabel","optionValue","placeholder","style","showClear","changeGrouByOption","$event","value","products","rowGroupMode","groupByOptionSelection","groupRowsBy","removableSort","sortField","dynamicSortField","sortOrder","paginator","rows","groupheader","product","data","supplier","name","category","header","field","headerStyle","body","quantity","severity","price","toFixed","editProduct","openDeleteProductDialog","visible","newCategoryDialogVisibility","modal","closeNewCategoryDialog","footer","autofocus","validateNewCategory","type","newCategoryData","maxlength","newProductDialogVisibility","closeNewProductDialog","validateNewProduct","newProductData","mode","currency","locale","supplier_id","suppliers","category_id","categories","a","defaults","baseURL","newProductSubmitted","newCategorySubmitted","console","log","VUE_APP_TITLE","this","getProducts","get","then","response","methods","str","length","test","event","$confirm","require","message","accept","deleteProduct","reject","delete","id","$toast","add","summary","detail","catch","error","status","statusText","patch","life","post","isNullOrWhiteSpace","saveProduct","unshift","saveCategory","render"],"mappings":"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","file":"js/chunk-2d0ab08d.7ad7252f.js","sourcesContent":["<template>\n  <h2 class=\"p-text-uppercase p-text-left\">Categorias de Produtos</h2>\n  <Toolbar class=\"p-p-2\">\n    <template #left>\n      <Button\n        class=\"p-m-0 p-button-success\"\n        label=\"Categoria\"\n        icon=\"fas fa-plus\"\n        @click=\"openNewCategoryDialog\"\n      ></Button>\n      <Button\n        class=\"p-ml-2 p-button-success\"\n        label=\"Produto\"\n        icon=\"fas fa-plus\"\n        @click=\"openNewProductDialog\"\n      ></Button>\n    </template>\n    <template #right>\n      <div class=\"p-inputgroup\">\n        <span class=\"p-inputgroup-addon\"><i class=\"fas fa-layer-group\" /></span>\n        <Dropdown\n          v-model=\"groupByOption\"\n          :options=\"groupByOptionList\"\n          optionLabel=\"label\"\n          optionValue=\"value\"\n          placeholder=\"Agrupar por\"\n          style=\"width: 12rem\"\n          :showClear=\"true\"\n          @change=\"changeGrouByOption($event)\"\n        />\n      </div>\n    </template>\n  </Toolbar>\n  <DataTable\n    :value=\"products\"\n    class=\"p-datatable-sm\"\n    :rowGroupMode=\"groupByOptionSelection ? 'subheader' : ''\"\n    :groupRowsBy=\"\n      groupByOptionSelection === 'supplier'\n        ? 'supplier.id'\n        : groupByOptionSelection === 'category'\n        ? 'category.id'\n        : 'id'\n    \"\n    removableSort\n    :sortField=\"dynamicSortField\"\n    :sortOrder=\"1\"\n    :paginator=\"true\"\n    :rows=\"13\"\n  >\n    <Column header=\"#\" field=\"id\" headerStyle=\"width: 3rem\" />\n    <Column header=\"Nome\" field=\"name\" />\n    <Column header=\"Quantidade\" field=\"quantity\">\n      <template #body=\"product\">\n        <Tag\n          :value=\"product.data.quantity\"\n          style=\"width: 4rem\"\n          :severity=\"\n            product.data.quantity >= 15\n              ? 'success'\n              : product.data.quantity >= 10\n              ? 'warning'\n              : 'danger'\n          \"\n        />\n      </template>\n    </Column>\n    <Column header=\"Preço\" field=\"price\">\n      <template #body=\"product\">\n        R$ {{ product.data.price.toFixed(2) }}\n      </template>\n    </Column>\n    <Column\n      field=\"supplier.name\"\n      header=\"Fornecedor\"\n      v-if=\"groupByOptionSelection != 'supplier'\"\n    />\n\n    <Column\n      field=\"category.name\"\n      header=\"Categoria\"\n      v-if=\"groupByOptionSelection != 'category'\"\n    />\n    <Column>\n      <template #body=\"product\">\n        <div class=\"p-grid p-jc-end\">\n          <Button\n            class=\"\n              p-button-icon-only\n              p-button-rounded\n              p-button-outlined\n              p-button-help\n              p-mx-1\n            \"\n            icon=\"fas fa-edit\"\n            @click=\"editProduct(product.data)\"\n          ></Button>\n          <Button\n            class=\"\n              p-button-icon-only\n              p-button-rounded\n              p-button-outlined\n              p-button-danger\n              p-mx-4\n            \"\n            icon=\"fas fa-trash\"\n            @click=\"openDeleteProductDialog(product.data)\"\n          ></Button>\n        </div>\n      </template>\n    </Column>\n    <template #groupheader=\"product\">\n      <h3 class=\"p-text-uppercase p-text-bold p-my-2\">\n        <span v-if=\"groupByOptionSelection == 'supplier'\"\n          ><i class=\"fas fa-building\" />\n          {{ product.data.supplier.name }}\n        </span>\n        <span v-if=\"groupByOptionSelection == 'category'\">\n          <i class=\"fas fa-th\" />\n          {{ product.data.category.name }}\n        </span>\n      </h3>\n    </template>\n  </DataTable>\n\n  <Dialog\n    v-model:visible=\"newCategoryDialogVisibility\"\n    :modal=\"true\"\n    style=\"width: 40vw\"\n    @hide=\"closeNewCategoryDialog\"\n  >\n    <template #header>\n      <h3>Nova Categoria</h3>\n    </template>\n\n    <div class=\"p-fluid p-grid p-mt-2\">\n      <div class=\"p-field p-col-12\">\n        <span class=\"p-float-label\">\n          <InputText\n            type=\"text\"\n            v-model=\"newCategoryData.name\"\n            maxlength=\"50\"\n            :class=\"{\n              'p-invalid':\n                newCategorySubmitted &&\n                isNullOrWhiteSpace(newCategoryData.name),\n            }\"\n          />\n          <label>Nome da categoria</label>\n        </span>\n      </div>\n    </div>\n\n    <template #footer>\n      <Button\n        label=\"Não\"\n        icon=\"pi pi-times\"\n        class=\"p-button-text\"\n        @click=\"closeNewCategoryDialog\"\n      />\n      <Button\n        label=\"Sim\"\n        icon=\"pi pi-check\"\n        autofocus\n        @click=\"validateNewCategory\"\n      />\n    </template>\n  </Dialog>\n\n  <Dialog\n    v-model:visible=\"newProductDialogVisibility\"\n    :modal=\"true\"\n    style=\"width: 40vw\"\n    @hide=\"closeNewProductDialog\"\n  >\n    <template #header>\n      <h3>Novo Produto</h3>\n    </template>\n\n    <div class=\"p-fluid p-grid p-mt-2\">\n      <div class=\"p-field p-col-12\">\n        <span class=\"p-float-label\">\n          <InputText\n            type=\"text\"\n            v-model=\"newProductData.name\"\n            maxlength=\"50\"\n            :class=\"{\n              'p-invalid':\n                newProductSubmitted && isNullOrWhiteSpace(newProductData.name),\n            }\"\n          />\n          <label>Nome do produto</label>\n        </span>\n      </div>\n    </div>\n    <div class=\"p-fluid p-grid p-mt-2\">\n      <div class=\"p-field p-col-8\">\n        <span class=\"p-float-label\">\n          <InputNumber\n            mode=\"currency\"\n            currency=\"BRL\"\n            locale=\"pt-BR\"\n            v-model=\"newProductData.price\"\n            :class=\"{\n              'p-invalid':\n                newProductSubmitted && isNullOrWhiteSpace(newProductData.price),\n            }\"\n          />\n          <label>Preço</label>\n        </span>\n      </div>\n      <div class=\"p-field p-col-4\">\n        <span class=\"p-float-label\">\n          <InputNumber\n            v-model=\"newProductData.quantity\"\n            mode=\"decimal\"\n            locale=\"pt-BR\"\n            :class=\"{\n              'p-invalid':\n                newProductSubmitted &&\n                isNullOrWhiteSpace(newProductData.quantity) &&\n                newProductData.quantity != 0,\n            }\"\n          />\n          <label>Quantidade</label>\n        </span>\n      </div>\n    </div>\n    <div class=\"p-fluid p-grid p-mt-2\">\n      <div class=\"p-field p-col-6\">\n        <span class=\"p-float-label\">\n          <Dropdown\n            v-model=\"newProductData.supplier_id\"\n            :options=\"suppliers\"\n            optionLabel=\"name\"\n            optionValue=\"id\"\n            :class=\"{\n              'p-invalid':\n                newProductSubmitted &&\n                isNullOrWhiteSpace(newProductData.supplier_id),\n            }\"\n          ></Dropdown>\n          <label>Fornecedores</label>\n        </span>\n      </div>\n      <div class=\"p-field p-col-6\">\n        <span class=\"p-float-label\">\n          <Dropdown\n            v-model=\"newProductData.category_id\"\n            :options=\"categories\"\n            optionLabel=\"name\"\n            optionValue=\"id\"\n            :class=\"{\n              'p-invalid':\n                newProductSubmitted &&\n                isNullOrWhiteSpace(newProductData.category_id),\n            }\"\n          ></Dropdown>\n          <label>Categoria</label>\n        </span>\n      </div>\n    </div>\n\n    <template #footer>\n      <Button\n        label=\"Não\"\n        icon=\"pi pi-times\"\n        class=\"p-button-text\"\n        @click=\"closeNewProductDialog\"\n      />\n      <Button\n        label=\"Sim\"\n        icon=\"pi pi-check\"\n        autofocus\n        @click=\"validateNewProduct\"\n      />\n    </template>\n  </Dialog>\n  <Toast />\n  <ConfirmDialog />\n</template>\n\n<script>\nimport axios from \"axios\";\naxios.defaults.baseURL = process.env.VUE_APP_BACKEND_BASE;\n\nexport default {\n  data() {\n    return {\n      dynamicSortField: null,\n\n      products: [],\n      suppliers: [],\n      categories: [],\n\n      newProductSubmitted: false,\n      newProductDialogVisibility: false,\n      newProductData: {},\n\n      newCategorySubmitted: false,\n      newCategoryDialogVisibility: false,\n      newCategoryData: {},\n\n      groupByOption: null,\n      groupByOptionSelection: null,\n      groupByOptionList: [\n        { value: \"supplier\", label: \"Fornecedor\" },\n        { value: \"category\", label: \"Categoria\" },\n      ],\n    };\n  },\n  mounted() {\n    console.log(process.env.VUE_APP_BACKEND_BASE);\n    console.log(process.env.VUE_APP_TITLE);\n    this.getProducts();\n    axios.get(\"/api/company/\").then((response) => {\n      this.suppliers = response.data;\n    });\n    axios.get(\"/api/category/\").then((response) => {\n      this.categories = response.data;\n    });\n  },\n  methods: {\n    getProducts() {\n      this.products = [];\n      axios.get(\"/api/product/\").then((response) => {\n        this.products = response.data;\n      });\n    },\n    // https://gist.github.com/EdCharbeneau/9552248\n    isNullOrWhiteSpace(str) {\n      return !str || str.length === 0 || /^\\s*$/.test(str);\n    },\n    changeGrouByOption(event) {\n      this.dynamicSortField = `${event.value}.name`;\n      this.groupByOption = event.value;\n      this.groupByOptionSelection = event.value;\n    },\n    openNewProductDialog() {\n      this.newProductDialogVisibility = true;\n    },\n    closeNewProductDialog() {\n      this.newProductDialogVisibility = false;\n      this.newProductData = {};\n      this.newProductSubmitted = false;\n    },\n    openNewCategoryDialog() {\n      this.newCategoryDialogVisibility = true;\n    },\n    closeNewCategoryDialog() {\n      this.newCategoryDialogVisibility = false;\n      this.newCategoryData = {};\n      this.newCategorySubmitted = false;\n    },\n    openDeleteProductDialog(product) {\n      this.$confirm.require({\n        message: `Deseja realmente apagar o produto ${product.name}?`,\n        header: \"Tem certeza?\",\n        icon: \"pi pi-exclamation-triangle\",\n        accept: () => {\n          this.deleteProduct(product);\n          this.getProducts();\n        },\n        reject: () => {\n          //callback to execute when user rejects the action\n        },\n      });\n    },\n    deleteProduct(product) {\n      axios\n        .delete(`/api/product/${product.id}/`)\n        .then(() => {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Sucesso!\",\n            detail: `Produto apagado com sucesso!`,\n          });\n        })\n        .catch((error) => {\n          this.$toast.add({\n            severity: \"error\",\n            summary: `Erro! ${error.response.status} ${error.response.statusText}`,\n            detail: error.message,\n          });\n        });\n    },\n    saveProduct() {\n      if (this.newProductData.id) {\n        axios\n          .patch(`/api/product/${this.newProductData.id}/`, this.newProductData)\n          .then((response) => {\n            this.$toast.add({\n              severity: \"success\",\n              summary: \"Sucesso!\",\n              detail: `Produto \"${response.data.name}\" atualizado`,\n              life: 3000,\n            });\n            this.newProductData = {};\n            this.newProductDialogVisibility = false;\n            this.newProductSubmitted = false;\n            this.getProducts();\n          });\n      } else {\n        axios.post(\"/api/product/\", this.newProductData).then((response) => {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Sucesso!\",\n            detail: `Produto \"${response.data.name}\" cadastrado`,\n            life: 3000,\n          });\n          this.newProductData = {};\n          this.newProductDialogVisibility = false;\n          this.newProductSubmitted = false;\n          this.getProducts();\n        });\n      }\n    },\n    validateNewProduct() {\n      this.newProductSubmitted = true;\n      if (\n        this.isNullOrWhiteSpace(this.newProductData.name) ||\n        this.isNullOrWhiteSpace(this.newProductData.price) ||\n        (this.isNullOrWhiteSpace(this.newProductData.quantity) &&\n          this.newProductData.quantity != 0) ||\n        this.isNullOrWhiteSpace(this.newProductData.supplier_id) ||\n        this.isNullOrWhiteSpace(this.newProductData.category_id)\n      ) {\n        this.$toast.add({\n          severity: \"warn\",\n          summary: \"Atenção!\",\n          detail: \"Preencha todos os campos\",\n          life: 3000,\n        });\n      } else {\n        this.saveProduct();\n      }\n    },\n    editProduct(product) {\n      this.openNewProductDialog();\n      this.newProductData.id = product.id;\n      this.newProductData.name = product.name;\n      this.newProductData.price = product.price;\n      this.newProductData.quantity = product.quantity;\n\n      this.newProductData.supplier_id = product.supplier.id;\n      this.newProductData.category_id = product.category.id;\n    },\n    saveCategory() {\n      axios.post(\"/api/category/\", this.newCategoryData).then((response) => {\n        this.$toast.add({\n          severity: \"success\",\n          summary: \"Sucesso!\",\n          detail: `Categoria \"${response.data.name}\" cadastrada`,\n          life: 3000,\n        });\n        this.categories.unshift(response.data);\n        this.newCategoryData = {};\n        this.newCategoryDialogVisibility = false;\n        this.newCategorySubmitted = false;\n      });\n    },\n    validateNewCategory() {\n      this.newCategorySubmitted = true;\n      if (this.isNullOrWhiteSpace(this.newCategoryData.name)) {\n        this.$toast.add({\n          severity: \"warn\",\n          summary: \"Atenção!\",\n          detail: \"Preencha todos os campos\",\n          life: 3000,\n        });\n      } else {\n        this.saveCategory();\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./Produtos.vue?vue&type=template&id=1f4f9a2f\"\nimport script from \"./Produtos.vue?vue&type=script&lang=js\"\nexport * from \"./Produtos.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
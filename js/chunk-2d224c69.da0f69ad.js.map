{"version":3,"sources":["webpack:///./src/views/Relatorio.vue","webpack:///./src/views/Relatorio.vue?513d"],"names":["class","style","header","value","categories","paginator","rows","expandedRows","expandedCategories","dataKey","ref","icon","label","exportCategories","$event","expansion","category","data","products","itens","total_itens","name","field","headerStyle","body","product","price","toFixed","expander","missingProducts","exportMissingProducts","exportable","suppliersMissingStock","expandedSuppliersMissingStock","exportSuppliersMissingStock","a","defaults","baseURL","get","then","response","this","methods","$refs","categoriesTable","exportCSV","missingProductsTable","suppliersMissingStockTable","render"],"mappings":"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","file":"js/chunk-2d224c69.da0f69ad.js","sourcesContent":["<template>\n  <h2 class=\"p-text-uppercase p-text-left\">Relatório</h2>\n  <TabView>\n    <TabPanel>\n      <template #header>\n        <i class=\"fas fa-list-alt\"></i>\n        <span class=\"p-ml-1\">Estoque por categoria</span>\n      </template>\n      <DataTable\n        :value=\"categories\"\n        class=\"p-datatable-sm\"\n        :paginator=\"true\"\n        :rows=\"13\"\n        v-model:expandedRows=\"expandedCategories\"\n        dataKey=\"id\"\n        ref=\"categoriesTable\"\n        style=\"width: 100%\"\n      >\n        <template #header>\n          <div class=\"p-d-flex p-jc-between p-ai-center\">\n            <h3 class=\"p-m-0\">Categorias</h3>\n            <Button\n              icon=\"pi pi-external-link\"\n              label=\"Export\"\n              class=\"p-button-info\"\n              @click=\"exportCategories($event)\"\n            />\n          </div>\n        </template>\n        <Column :expander=\"true\" headerStyle=\"width: 3rem\" />\n        <Column field=\"id\" header=\"#\" headerStyle=\"width: 3rem\" />\n        <Column field=\"name\" header=\"Nome\" />\n        <Column field=\"products.total_itens\" header=\"Total de Itens\" />\n        <Column field=\"products.total_quantity\" header=\"Total de estoque\" />\n        <template #expansion=\"category\">\n          <div style=\"\">\n            <DataTable\n              :value=\"category.data.products.itens\"\n              class=\"p-datatable-sm\"\n            >\n              <template #header>\n                <h4>\n                  {{ category.data.products.total_itens }} produtos da categoria\n                  {{ category.data.name }}\n                </h4>\n              </template>\n              <Column field=\"id\" header=\"#\" headerStyle=\"width: 3rem\"></Column>\n              <Column field=\"name\" header=\"Nome do produto\"></Column>\n              <Column field=\"price\" header=\"Preço\">\n                <template #body=\"product\">\n                  R$ {{ product.data.price.toFixed(2) }}\n                </template>\n              </Column>\n              <Column field=\"quantity\" header=\"Quantidade\"></Column>\n            </DataTable>\n          </div>\n        </template>\n      </DataTable>\n    </TabPanel>\n    <TabPanel>\n      <template #header>\n        <i class=\"fas fa-box-open\"></i>\n        <span class=\"p-ml-1\">Produtos em falta</span>\n      </template>\n      <DataTable\n        :value=\"missingProducts\"\n        class=\"p-datatable-sm\"\n        :paginator=\"true\"\n        :rows=\"13\"\n        dataKey=\"id\"\n        ref=\"missingProductsTable\"\n        style=\"width: 100%\"\n      >\n        <template #header>\n          <div class=\"p-d-flex p-jc-between p-ai-center\">\n            <h3 class=\"p-m-0\">Produtos em Falta</h3>\n            <Button\n              icon=\"pi pi-external-link\"\n              label=\"Export\"\n              class=\"p-button-info\"\n              @click=\"exportMissingProducts($event)\"\n            />\n          </div>\n        </template>\n        <Column field=\"id\" header=\"#\" headerStyle=\"width: 3rem\" />\n        <Column field=\"name\" header=\"Nome\" />\n        <Column field=\"price\" header=\"Preço\" />\n        <Column field=\"supplier.name\" header=\"Fornecedor\" />\n        <Column field=\"category.name\" header=\"Categoria\" />\n        <Column field=\"quantity\" header=\"Quantidade\" :exportable=\"false\" />\n      </DataTable>\n    </TabPanel>\n    <TabPanel>\n      <template #header>\n        <i class=\"fas fa-pallet\"></i>\n        <span class=\"p-ml-1\">Fornecedores sem estoque</span>\n      </template>\n      <DataTable\n        :value=\"suppliersMissingStock\"\n        class=\"p-datatable-sm\"\n        :paginator=\"true\"\n        :rows=\"13\"\n        dataKey=\"id\"\n        ref=\"suppliersMissingStockTable\"\n        style=\"width: 100%\"\n        v-model:expandedRows=\"expandedSuppliersMissingStock\"\n      >\n        <template #header>\n          <div class=\"p-d-flex p-jc-between p-ai-center\">\n            <h3 class=\"p-m-0\">Fornecedores com falta de estoque</h3>\n            <Button\n              icon=\"pi pi-external-link\"\n              label=\"Export\"\n              class=\"p-button-info\"\n              @click=\"exportSuppliersMissingStock($event)\"\n            />\n          </div>\n        </template>\n        <Column :expander=\"true\" headerStyle=\"width: 3rem\" />\n        <Column field=\"id\" header=\"#\" headerStyle=\"width: 3rem\" />\n        <Column field=\"name\" header=\"Nome\" />\n        <template #expansion=\"company\">\n          <DataTable\n            :value=\"\n              company.data.products.itens.filter(\n                (product) => product.quantity == 0\n              )\n            \"\n          >\n            <Column field=\"id\" header=\"#\" headerStyle=\"width: 3rem\"></Column>\n            <Column field=\"name\" header=\"Nome\"></Column>\n            <Column field=\"category.name\" header=\"Category\"></Column>\n            <Column field=\"quantity\" header=\"Quantidade\"></Column>\n            <Column field=\"price\" header=\"Preço\">\n              <template #body=\"product\">\n                R$ {{ product.data.price.toFixed(2) }}\n              </template>\n            </Column>\n          </DataTable>\n        </template>\n      </DataTable>\n    </TabPanel>\n  </TabView>\n</template>\n\n<script>\nimport axios from \"axios\";\naxios.defaults.baseURL = process.env.VUE_APP_BACKEND_BASE;\n\nexport default {\n  name: \"Relatorio\",\n  data() {\n    return {\n      categories: [],\n      expandedCategories: [],\n\n      missingProducts: [],\n\n      suppliersMissingStock: [],\n      expandedSuppliersMissingStock: [],\n    };\n  },\n  mounted() {\n    axios.get(\"/api/category/\").then((response) => {\n      this.categories = response.data;\n    });\n    axios.get(\"/api/product/?quantity=0\").then((response) => {\n      this.missingProducts = response.data;\n    });\n    axios.get(\"/api/company/missing-stock/\").then((response) => {\n      this.suppliersMissingStock = response.data;\n    });\n  },\n  methods: {\n    exportCategories() {\n      this.$refs.categoriesTable.exportCSV();\n    },\n    exportMissingProducts() {\n      this.$refs.missingProductsTable.exportCSV();\n    },\n    exportSuppliersMissingStock() {\n      this.$refs.suppliersMissingStockTable.exportCSV();\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n","import { render } from \"./Relatorio.vue?vue&type=template&id=0922f0bc\"\nimport script from \"./Relatorio.vue?vue&type=script&lang=js\"\nexport * from \"./Relatorio.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}